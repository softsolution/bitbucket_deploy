Схема работы деплоя с двумя ветками

В bitbucket.org хранится основной репозиторий (приватный) сайта.

В нем две ветки:
1) master - основная рабочая ветка, в нее в носим изменения. На сервере ей соотвествует поддомен dev.site.com (у него своя база, от основного сайта никак не зависит)
2) production - ветка с готовым рабочим кодом. в нее вливаем изменения из master. Важно! Только мержим с master, не работаем в ней. изменения попадают на основой сайт после git push.

На сервере с основным сайтом теперь не работаем!!! Все изменения только через git.

С поддоменом dev.site.info можно работать как с удаленным, но нужно вносить изменения в ветку master и готовые изменения вливать в ветку production.

Добавить нового пользователя к репозиторию
https://git@bitbucket.org/BITBUCKETUSER/REPONAME.git

на странице
https://bitbucket.org/BITBUCKETUSER/REPONAME/admin/access 
по адресу электронной почты
непосредственно в проект или в группу developers
на странице
https://bitbucket.org/account/user/.../groups/
Права пользователя write

После добавления ему приходит письмо со ссылкой на репоизторий.

Далее он:

1. Клонирует репозиторий
git clone https://BITBUCKETUSER@bitbucket.org/BITBUCKETUSER/REPONAME.git
или
git remote add origin git@bitbucket.org:BITBUCKETUSER/REPONAME.git

2. Настраивает подключение к серверу или запускает локальную копию 
(для локальной копии понадобится дамп базы, для удаленного подключения настройки FTP)

3. Вносим изменения в ветку master

4. Делаем коммиты

5. пушим изменения в ветку master
git push origin master

6. если новые изменения нас устраивают - вливаем их в production
git checkout production
git merge master
